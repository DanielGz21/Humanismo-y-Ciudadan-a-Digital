<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chronotech Odyssey: Puente Generacional - Albert Gaviria Edition</title>
    <!-- Import Tone.js para efectos de sonido inmersivos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Orbitron:wght@600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        CHRONOTECH ODYSSEY: BRIDGE BUILDER SIMULATOR 
        <div class="footer-credits">Desarrollado por: Albert Daniel Gaviria - Chronotech Founder</div>
    </header>

    <!-- 1. Hero Section -->
    <section id="hero">
        <div class="container">
            <h1 class="title">🚀 Chronotech Odyssey</h1>
            <p class="subtitle">Viaja a través de las generaciones, domina sus tecnologías y construye puentes digitales para unir el mundo. ¡El futuro de la comunicación depende de tu empatía tecnológica!</p>
            <button class="btn" onclick="scrollToElement('tutorial')">Ver Tutorial</button>
        </div>
    </section>
    
    <!-- 2. Tutorial Section (NUEVO) -->
    <section id="tutorial">
        <div class="container">
            <h2>MANUAL DE OPERACIONES CHRONOTECH</h2>
            <p class="scene-desc">Este manual es un resumen inteligente para asegurar la eficiencia de tu misión.</p>
            
            <div class="tutorial-grid">
                
                <div class="guide-card">
                    <h3>¿Qué Hace el Proyecto?</h3>
                    <p>Simula un viaje a través de 8 eras generacionales de la tecnología, desde 1901 hasta la actualidad (Alpha/Z). El objetivo es que, al interactuar con los desafíos de cada época, el jugador desarrolle **empatía tecnológica** y habilidades de comunicación adaptable.</p>
                    <p><strong>El resultado:</strong> Eres un **Maestro Cronotech**, capaz de comunicarte eficazmente con cualquier generación.</p>
                </div>

                <div class="guide-card">
                    <h3>Cómo se Juega (La Aventura)</h3>
                    <ol>
                        <li>**Inicio:** La misión comienza con el módulo de **Calibración Temporal** (Juego de Memoria).</li>
                        <li>**Desafíos:** Supera los 7 desafíos de era restantes (Presente, Silenciosa, Boomers, X, Millennials, Z, Alpha).</li>
                        <li>**Éxito:** Responde correctamente a la pregunta o supera la prueba de destreza. Obtienes 10 puntos y un sonido de éxito.</li>
                        <li>**Avance:** El botón 'Viajar a Siguiente Era' se activa automáticamente al completar el desafío.</li>
                    </ol>
                </div>

                <div class="guide-card">
                    <h3>El CHRONO-METER y el Riesgo</h3>
                    <p><strong>¿Qué Pasa si SÍ?:</strong> Si completas la misión antes de que el **Chrono-Meter** llegue a cero, obtienes los 10 puntos y avanzas. Tu tiempo restante se suma a tu **Puntuación de Eficiencia**, lo que mejora tu rango final.</p>
                    <p><strong>¿Qué Pasa si NO?:</strong> Si el tiempo se agota, suena la alarma de fallo. Pierdes el desafío (0 puntos) y se te penaliza en el tiempo total. El botón 'Viajar a Siguiente Era' se habilita forzosamente para que puedas continuar, pero afectará tu **Rango Chronotech**.</p>
                </div>

                <div class="guide-card">
                    <h3>Lo que NO se Hace</h3>
                    <ul>
                        <li>**No te Demores:** El Chrono-Meter es real. Los desafíos de Selección (Radio/TV/Social/TikTok) deben hacerse con velocidad.</li>
                        <li>**No Clickees al Azar:** Los juegos de selección tienen penalizaciones implícitas; si te equivocas, pierdes tiempo valioso.</li>
                        <li>**No Inicies sin Concentración:** El juego de Calibración (Memoria) es fundamental. Inícialo solo cuando estés listo, ya que usa el tiempo más largo (60s).</li>
                    </ul>
                </div>

            </div>
            <button class="btn submit-btn" onclick="startGame()" style="margin-top: 40px;">¡Comenzar Odisea Ahora!</button>
        </div>
    </section>

    <!-- 3. Game Simulator Section -->
    <section id="game-section" class="container">
        <!-- HUD - Head-Up Display -->
        <div class="hud">
            <div class="score">Puntuación: <span id="score">0</span></div>
            <div class="digital-compass">Era Actual: <span id="current-era">Inicializando...</span></div>
            <div class="chrono-meter">Tiempo: <span id="time-remaining">--</span></div>
            <button class="btn time-travel-btn" id="time-travel-btn" onclick="timeTravel()" disabled>Viajar a Siguiente Era ➡️</button>
        </div>
        
        <!-- TIMELINE (MINI-MAP) -->
        <div class="timeline-container">
            <!-- Marcadores de era del 0 al 7 -->
            <span class="era-marker marker-0" data-index="0" title="Calibración"></span>
            <div class="timeline-era era-0" data-index="0"></div>
            <span class="era-marker marker-1" data-index="1" title="Presente"></span>
            <div class="timeline-era era-1" data-index="1"></div>
            <span class="era-marker marker-2" data-index="2" title="Silenciosa"></span>
            <div class="timeline-era era-2" data-index="2"></div>
            <span class="era-marker marker-3" data-index="3" title="Boomers"></span>
            <div class="timeline-era era-3" data-index="3"></div>
            <span class="era-marker marker-4" data-index="4" title="Gen X"></span>
            <div class="timeline-era era-4" data-index="4"></div>
            <span class="era-marker marker-5" data-index="5" title="Millennials"></span>
            <div class="timeline-era era-5" data-index="5"></div>
            <span class="era-marker marker-6" data-index="6" title="Gen Z"></span>
            <div class="timeline-era era-6" data-index="6"></div>
            <span class="era-marker marker-7" data-index="7" title="Alpha"></span>
        </div>

        <!-- Scenes (The actual game content) -->
        <div id="scenes" style="width: 100%;">
            
            <!-- Scene 0: Calibration (Memory Game) -->
            <div class="scene active" data-scene="0">
                <h2 class="scene-title">Calibración Temporal: Módulo de Memoria</h2>
                <p class="scene-desc">Tienes 60 segundos para activar tu memoria tecnológica encontrando los 4 pares de íconos. ¡Precisión y velocidad!</p>
                <div class="mini-game">
                    <div id="memory-grid">
                        <!-- Cards will be generated by JavaScript -->
                    </div>
                    <p id="memory-status" style="font-weight: bold; margin-top: 15px; color: var(--accent);"></p>
                    <button class="btn submit-btn" onclick="initializeMemoryGame(true)" id="start-memory-btn">Iniciar Juego de Memoria</button>
                    <div class="feedback" id="feedback-0"></div>
                </div>
            </div>

            <!-- Scene 1: Present (Gen Alpha/Z) -->
            <div class="scene" data-scene="1">
                <h2 class="scene-title">Presente: Era Digital (Gen Alpha/Z)</h2>
                <p class="scene-desc">Tienes 30 segundos. Demuestra que dominas la inmediatez: Envía un mensaje completo.</p>
                <div class="mini-game">
                    <p>Desafío: Envía un mensaje usando tecnología moderna (simulado).</p>
                    <input type="text" class="message-input" placeholder="Escribe tu mensaje instantáneo..." id="modern-msg">
                    <button class="btn submit-btn" onclick="sendModernMessage()">Enviar Mensaje 📲</button>
                    <div class="tech-sim" id="modern-sim"></div>
                    <div class="feedback" id="feedback-1"></div>
                </div>
            </div>

            <!-- Scene 2: Silent Generation -->
            <div class="scene" data-scene="2">
                <h2 class="scene-title">1901-1945: Generación Silenciosa</h2>
                <p class="scene-desc">Tienes 30 segundos. Sintoniza el mensaje: selecciona las 4 palabras clave de la era Radio/Prensa.</p>
                <div class="mini-game">
                    <p>Desafío: Sintoniza el mensaje (selecciona las 4 palabras clave de la era).</p>
                    <div class="puzzle-grid" id="radio-puzzle">
                        <div class="puzzle-piece" data-correct="true">📻 Radio</div>
                        <div class="puzzle-piece" data-correct="true">📰 Periódicos</div>
                        <div class="puzzle-piece">Internet</div>
                        <div class="puzzle-piece" data-correct="true">Telegrama</div>
                        <div class="puzzle-piece">TikTok</div>
                        <div class="puzzle-piece" data-correct="true">Paciencia</div>
                    </div>
                    <button class="btn submit-btn" onclick="checkRadioPuzzle()">Verificar Sintonía</button>
                    <div class="feedback" id="feedback-2"></div>
                </div>
            </div>

            <!-- Scene 3: Baby Boomers -->
            <div class="scene" data-scene="3">
                <h2 class="scene-title">1946-1964: Baby Boomers</h2>
                <p class="scene-desc">Tienes 30 segundos. La TV trajo contenido masivo. Selecciona el contenido típico de la televisión de esa era.</p>
                <div class="mini-game">
                    <p>Desafío: Selecciona el contenido típico de la televisión de esa era.</p>
                    <div class="puzzle-grid" id="tv-puzzle">
                        <div class="puzzle-piece" data-correct="true">Noticias (Centralizadas)</div>
                        <div class="puzzle-piece" data-correct="true">Series (En Blanco y Negro)</div>
                        <div class="puzzle-piece">Vlogs</div>
                        <div class="puzzle-piece" data-correct="true">Deportes en Vivo</div>
                        <div class="puzzle-piece">Historias de Instagram</div>
                        <div class="puzzle-piece" data-correct="true">Documentales Largos</div>
                    </div>
                    <button class="btn submit-btn" onclick="checkTVPuzzle()">Crear Programación</button>
                    <div class="feedback" id="feedback-3"></div>
                </div>
            </div>

            <!-- Scene 4: Gen X -->
            <div class="scene" data-scene="4">
                <h2 class="scene-title">1965-1980: Generación X</h2>
                <p class="scene-desc">Tienes 30 segundos. El PC requería lógica. Completa el comando para ejecutar el programa.</p>
                <div class="mini-game">
                    <p>Desafío: Completa el comando de programación básico para que el ordenador responda.</p>
                    <div class="tech-sim">
                        <pre>10 PRINT "Hola, mundo!"</pre>
                        <input type="text" class="message-input" placeholder="Escribe 'RUN' para ejecutar..." id="code-input">
                        <button class="btn submit-btn" onclick="runCode()">Ejecutar</button>
                    </div>
                    <div class="feedback" id="feedback-4"></div>
                </div>
            </div>

            <!-- Scene 5: Millennials -->
            <div class="scene" data-scene="5">
                <h2 class="scene-title">1981-1996: Millennials</h2>
                <p class="scene-desc">Tienes 30 segundos. Internet requería construir comunidad. Selecciona los 4 pilares de una red social sólida.</p>
                <div class="mini-game">
                    <p>Desafío: Construye una red social sólida (selecciona los 4 pilares de una comunidad en línea).</p>
                    <div class="puzzle-grid" id="social-puzzle">
                        <div class="puzzle-piece" data-correct="true">Conexión</div>
                        <div class="puzzle-piece" data-correct="true">Contenido Útil</div>
                        <div class="puzzle-piece">Anonimato Total</div>
                        <div class="puzzle-piece" data-correct="true">Diálogo (Bidireccional)</div>
                        <div class="puzzle-piece">Filtros de Perro</div>
                        <div class="puzzle-piece" data-correct="true">Colaboración</div>
                    </div>
                    <button class="btn submit-btn" onclick="buildNetwork()">Conectar Nodos</button>
                    <div class="feedback" id="feedback-5"></div>
                </div>
            </div>

            <!-- Scene 6: Gen Z -->
            <div class="scene" data-scene="6">
                <h2 class="scene-title">1997-2012: Generación Z</h2>
                <p class="scene-desc">Tienes 30 segundos. La atención es clave. Selecciona 4 elementos para crear contenido corto y viral.</p>
                <div class="mini-game">
                    <p>Desafío: Crea un video viral (selecciona 4 elementos clave de la cultura de contenido corto).</p>
                    <div class="puzzle-grid" id="tiktok-puzzle">
                        <div class="puzzle-piece" data-correct="true">Música Trend</div>
                        <div class="puzzle-piece" data-correct="true">Edición Rápida</div>
                        <div class="puzzle-piece">Película 4 horas</div>
                        <div class="puzzle-piece" data-correct="true">Humor Visual</div>
                        <div class="puzzle-piece">Carta Formal</div>
                        <div class="puzzle-piece" data-correct="true">Hashtags</div>
                    </div>
                    <button class="btn submit-btn" onclick="createTikTok()">Publicar Contenido</button>
                    <div class="feedback" id="feedback-6"></div>
                </div>
            </div>

            <!-- Scene 7: Gen Alpha -->
            <div class="scene" data-scene="7">
                <h2 class="scene-title">2013+: Generación Alpha</h2>
                <p class="scene-desc">Tienes 30 segundos. Interactúa con la IA para demostrar tu adaptabilidad al aprendizaje inmersivo.</p>
                <div class="mini-game">
                    <p>Desafío: Interactúa con el agente IA (pregunta algo que demuestre curiosidad y adaptabilidad).</p>
                    <input type="text" class="message-input" placeholder="Pregunta a la IA (Ej: ¿Cómo se comunica mi abuelo?)..." id="ai-input">
                    <button class="btn submit-btn" onclick="askAI()">Preguntar al Agente 🤖</button>
                    <div class="tech-sim" id="ai-response"></div>
                    <div class="feedback" id="feedback-7"></div>
                </div>
            </div>

            <!-- Scene 8: Bridge Builder -->
            <div class="scene" data-scene="8">
                <h2 class="scene-title">¡Misión Cumplida! Construyendo el Puente</h2>
                <p class="scene-desc">Usaste la empatía tecnológica para entender cada era. Ahora, une los nodos.</p>
                <div class="bridge">
                    <div class="generation">Calibración</div>
                    <div class="bridge-line" id="bridge-0"></div>
                    <div class="generation">Presente</div>
                    <div class="bridge-line" id="bridge-1"></div>
                    <div class="generation">Silenciosa</div>
                    <div class="bridge-line" id="bridge-2"></div>
                    <div class="generation">Boomers</div>
                    <div class="bridge-line" id="bridge-3"></div>
                    <div class="generation">Gen X</div>
                    <div class="bridge-line" id="bridge-4"></div>
                    <div class="generation">Millennials</div>
                    <div class="bridge-line" id="bridge-5"></div>
                    <div class="generation">Gen Z</div>
                    <div class="bridge-line" id="bridge-6"></div>
                    <div class="generation">Alpha</div>
                </div>
                <button class="btn submit-btn" onclick="buildBridges()">Construir Puentes</button>
                <div class="feedback" id="feedback-8"></div>
            </div>

            <!-- Scene 9: Reflection -->
            <div class="scene reflection" data-scene="9">
                <h2>Certificado de Cronotech: Rango <span id="final-rank">--</span></h2>
                <p>¡Felicidades, Albert Daniel Gaviria! Has completado la Odisea.</p>
                <p>Has demostrado ser un **puente humano** capaz de traducir el lenguaje digital entre eras.</p>
                <p><strong>Puntuación Total:</strong> <span id="final-score-reflection">0</span> puntos.</p>
                <p><strong>Tiempo de Reacción Total:</strong> <span id="total-time-reflection">0</span> segundos.</p>
                <button class="btn" onclick="showShare()">Finalizar y Compartir Odisea</button>
            </div>

            <!-- Scene 10: Share -->
            <div class="scene share" data-scene="10">
                <h2>¡Comparte tu Odisea!</h2>
                <p>Tu **Rango Chronotech** es: <span id="final-rank-share" style="font-size: 1.5em; color: var(--secondary); font-weight: bold;">--</span></p>
                <p>Invita a un compañero a jugar y discutan cómo las tecnologías de cada generación influyen en la forma en que interactúan hoy.</p>
                <button class="btn" onclick="copyLink()">Copiar Enlace del Juego</button>
                <p id="copy-msg" style="display:none; color: var(--secondary); margin-top: 10px;">¡Enlace copiado al portapapeles!</p>
            </div>
        </div>
    </section>
    
    <!-- Comments Section -->
    <section id="comments-section">
        <div class="comments-container">
            <h2>Muro de la Odisea: Comentarios</h2>
            
            <!-- Comment Form -->
            <form id="comment-form">
                <div class="form-group">
                    <label for="comment-name">Nombre de Viajero</label>
                    <input type="text" id="comment-name" required>
                </div>
                <div class="form-group">
                    <label for="comment-text">Escribe tu comentario</label>
                    <textarea id="comment-text" required></textarea>
                    <div id="char-counter" class="char-counter">1000 caracteres restantes</div>
                </div>
                <button type="submit" class="btn">Enviar Comentario</button>
            </form>
            
            <!-- Comments List -->
            <div id="comments-loading">
                <div class="spinner"></div>
                <p>Cargando comentarios...</p>
            </div>
            <ul id="comments-list"></ul>
            <p id="no-comments-message" style="display: none;">Sé el primero en dejar un comentario en el Muro de la Odisea.</p>

        </div>
    </section>

    <footer>
        <p>&copy; 2024 Chronotech Odyssey - Todos los derechos reservados.</p>
        <p class="footer-credits">Desarrollado y Fundado por Albert Daniel Gaviria.</p>
    </footer>

    <script src="script.js"></script>
    <script src="comments.js" type="module"></script>
</body>
</html>
